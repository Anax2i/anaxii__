# SB load

**SB load** (сокращение загруженой раскадровки) это число, используемое в [Раскадровке](/wiki/Storyboards), чтобы указать, какую большую нагрузку вызывает раскадровка в графической программе. Это показатель того, сколько раз необходимо перерисовать всю область "640x480" в кадре.

Без раскадровки это значение равно 1x (так как все пространство "640x480" необходимо рисовать за один раз). Включение одного изображения, которое занимает ровно половину экрана, приведет к увеличению в 1,5 раза; два изображения, которые полностью перекрывают друг друга и занимают половину экрана, будут в 2 раза больше.

Лучше всего, если карта никогда не превышает 5x SB Load. Это гарантирует, что карта видна большинству игроков, не вызывая чрезмерной нагрузки на графическое оборудование.

[Оригинальный пост на форуме](https://osu.ppy.sh/community/forums/posts/525077)

## Где это отображается

- Тестирование в [Beatmap Editor](/wiki/Beatmap_Editor).
- [Storyboard Editor](/wiki/Beatmap_Editor/Design), хотя цифры могут быть не такими точными.

## Предложения по сокращению

От [Reducing SB Load](https://osu.ppy.sh/community/forums/topics/55177):

Вот несколько важных советов по снижению нагрузки, которую раскадровка может оказать на компьютер. Я прошу прощения, что это немного многословно, реальные идеи не так сложны, я просто много говорю. Я выделю важное.

### Отключить фоновое изображение

По умолчанию, фон, который Вы выбираете для своей карты, отображается в фоновом режиме на протяжении всей песни, даже если перед ней создается раскадровка. Это прекрасно работает, если у Вас минималистичный SB, или если Ваше фоновое изображение отображается в качестве фона на всем протяжении Вашего SB.

Однако, если Вы начнете раскадровку в других фонах перед Вашим фоном, это проблема. Смотрите, осу! продолжает рисовать свой фон, даже если перед ним есть что-то, и чем больше слоев у Вас есть, тем больше osu! должена обрабатывать, поэтому если у Вас есть скрытые слои, Вы тратите системные ресурсы.

Ну так что Вы делаете?

осу! имеет функцию устранения избыточности, которая автоматически отключает фоновое изображение для отображения в течение всей песни, если Вы используете это же изображение в любом месте Вашей раскадровки. Поэтому, если Ваше фоновое изображение используется в качестве фона только для одной «сцены» Вашей раскадровки, или если она является частью сделки типа слайд-шоу, просто вызовите Ваше изображение в SB так же, как Вы вызываете все другие изображения, и все будет хорошо.

Но если Вы собираетесь использовать разные элементы раскадровки на всей карте и просто хотите добавить изображение, которое будет отображаться в качестве фона в меню выбора песни, и в качестве эскиза на веб-сайте, то Вы будете делать следующее: установите изображение как фон, а затем добавьте одну строку кода SB под `//Storyboard Layer 0 (Background)` заголовок Вашего `.osb` (или `.osu`, если Вы делаете разные раскадровки на каждой сложности). Строка просто вызывает фон, а затем ничего с ним не делает.

**Просто замените "background.jpg" именем файла Вашего изображения в следующей строке:**

`Sprite,Background,TopLeft,"background.jpg",0,0`

И это все! Ваш фон будет заменен сплошной черной стеной, которая почти не использует вычислительную мощность для рисования. Особенно по сравнению с рисованием полноэкранного фона, а затем рисованием полноэкранного black.png перед ним, это огромное улучшение!

### Избегайте пустого места в Ваших изображениях

Для каждого png, который Вы используете в Вашей раскадровке, osu! должен нарисовать все это. Даже «прозрачные» пиксели необходимо «рисовать», поэтому изображения с большим количеством пустого пространства создают много ненужных нагрузок на компьютер. Это легко исправить, как правило:

- **Обрежьте как можно больше Ваших изображений, и всего лишнего в них.** В Photoshop есть инструмент, который сделает это за Вас. Просто нажмите "Изображение" -> "Тримминг.." , и у Вас будет несколько вариантов обрезки пустого пространства по краям.
- **Используйте разные варианты «происхождения», которые дает Вам раскадровка.** Допустим, у Вас есть спрайт (графический объект) персонажа, у которого голова качается вверх и вниз. В большинстве фреймов в верхней части спрайта есть кусок пустого пространства, потому что Вы хотите, чтобы все фреймы выстроились в линию, верно? Но если Вы установите источник "BottomCentre", то не будет иметь значения, насколько высок спрайт, он всегда будет выровнен снизу. Таким образом, Вы можете устранить пустое пространство в верхней части.
- **Несколько маленьких изображений могут быть лучше, чем одно большое изображение.** Это может быть довольно специфично для конкретной ситуации, но допустим, у Вас есть большой спрайт, в котором всего пять маленьких звездочек. Обрезка этого спрайта может оставить кучу пустого пространства посередине. Разбиение спрайта на кучу маленьких спрайтов может показаться неэффективным, но, поскольку загруженность osu! зависит от количества пикселей, а не от количества файлов, это может быть большим улучшением.
  - Точно так же, если у Вас полноэкранное изображение в виде «рамки» с большим окном или экраном, просматривающим остальную часть Вашего SB, рассмотрите возможность разбиения этого изображения на 4 изображения: одно для левой стороны, одно для правой стороны, другое для верха, и один для дна. Теперь вместо того, чтобы рисовать прозрачные пиксели почти на весь экран, Ваше пустое пространство фактически пусто, так как рисуется только граница. Вы, вероятно, хотите, чтобы по углам было немного перекрытия, чтобы избежать появления пропусков при воспроизведении карты с определенным разрешением, но старайтесь, чтобы перекрытие было как можно меньше.

### Не забывайте, что Вы можете перекрашивать изображения, используя SB-кодирование

Я просто упоминаю об этом, потому что я не вижу, чтобы этот эффект часто использовался в раскадровках, но **проверьте "[colour](/wiki/Storyboard_Scripting/Commands#color---colour--c--command)" код события в потоке сценариев**. Вы можете создавать крутые эффекты, создавая оттенки серого или светлый спрайт и накладывая на него различные цвета во время SB. Могут быть случаи, когда Вы теряете в отдельном фоновом изображении, когда Вы можете просто изменить цвет таким образом, для неба и прочего. Просто кое-что рассмотреть.

Надеюсь, эти советы пригодятся людям. Я знаю, что многие люди не знают о функции отключения фона, поэтому, пожалуйста, расскажите об этом, особенно если Вы видите кого-то, кто использует большое пустое черное изображение, чтобы скрыть свое фоновое изображение.

### Другие советы

- Убедитесь, что изображения не имеют почти невидимых слоев, когда они должны быть полностью невидимыми.
- Если изображение имеет большое количество прозрачных пикселей, разделите его на несколько изображений и подключите их в движке.
- Если сцена сложная (много наложений), попробуйте сделать ее одним изображением в GIMP / Photoshop, а затем отобразить только это (будьте осторожны, так как слишком много может привести к увеличению размера файла).
